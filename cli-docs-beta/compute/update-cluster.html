
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>update-cluster &#8212; CDP CLI 0.9.89 (BETA) documentation</title>
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../static/cdpcli.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../static/cdpcli.css" />
    
    <script id="documentation_options" data-url_root="../" src="../static/documentation_options.js"></script>
    <script src="../static/jquery.js"></script>
    <script src="../static/underscore.js"></script>
    <script src="../static/doctools.js"></script>
    
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="update-instance-group" href="update-instance-group.html" />
    <link rel="prev" title="rollback-deployment" href="rollback-deployment.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="update-instance-group.html" title="update-instance-group"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="rollback-deployment.html" title="rollback-deployment"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CDP CLI 0.9.89 (BETA) documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">compute</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">update-cluster</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="update-cluster">
<span id="cli-cdp-compute-update-cluster"></span><h1>update-cluster<a class="headerlink" href="#update-cluster" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">subtitle</dt>
<dd class="field-odd"><p>Update cluster</p>
</dd>
<dt class="field-even">version</dt>
<dd class="field-even"><p>0.9.89</p>
</dd>
</dl>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Updates compute cluster.</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>  update-cluster
--cluster-crn &lt;value&gt;
--spec &lt;value&gt;
--cluster-state-version &lt;value&gt;
<span class="o">[</span>--metadata &lt;value&gt;<span class="o">]</span>
<span class="o">[</span>--skip-validation <span class="p">|</span> --no-skip-validation<span class="o">]</span>
<span class="o">[</span>--cli-input-json &lt;value&gt;<span class="o">]</span>
<span class="o">[</span>--generate-cli-skeleton<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">--cluster-crn</span></code> (string)</p>
<blockquote>
<div><p>Compute Cluster CRN.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">--spec</span></code> (object)</p>
<blockquote>
<div><p>Compute cluster update spec.</p>
<p>deployments -&gt; (object)</p>
<blockquote>
<div><p>Update cluster deployments structure.</p>
<p>autoscaler -&gt; (object)</p>
<blockquote>
<div><p>Autoscaler request structure.</p>
<p>scaleDownDelayAfterAdd -&gt; (string)</p>
<blockquote>
<div><p>How long after scale up that scale down evaluation resumes. (Azure/AWS Support).</p>
</div></blockquote>
<p>scaleDownDelayAfterDelete -&gt; (string)</p>
<blockquote>
<div><p>How long after node deletion that scale down evaluation resumes, defaults to scanInterval. (Azure/AWS Support).</p>
</div></blockquote>
<p>scaleDownDelayAfterFailure -&gt; (string)</p>
<blockquote>
<div><p>How long after scale down failure that scale down evaluation resumes. (Azure/AWS Support).</p>
</div></blockquote>
<p>scaleDownEnabled -&gt; (boolean)</p>
<blockquote>
<div><p>Scale down flag. (AWS Support).</p>
</div></blockquote>
<p>scaleDownNonEmptyCandidatesCount -&gt; (integer)</p>
<blockquote>
<div><p>Maximum number of non empty nodes considered in one iteration as candidates for scale down with drain. Lower value means better CA responsiveness but possible slower scale down latency. Higher value can affect CA performance with big clusters (100s of nodes). Set to non positive value to turn this heuristic off - CA will not limit the number of nodes it considers. (AWS Support).</p>
</div></blockquote>
<p>scaleDownUnneededTime -&gt; (string)</p>
<blockquote>
<div><p>How long a node should be unneeded before it is eligible for scale down. (Azure/AWS Support).</p>
</div></blockquote>
<p>scaleDownUtilizationThreshold -&gt; (double)</p>
<blockquote>
<div><p>Node utilization level, defined as the sum of requested resources divided by capacity,. below which a node can be considered for scale down. (Azure/AWS Support).</p>
</div></blockquote>
<p>scanInterval -&gt; (string)</p>
<blockquote>
<div><p>Scan interval. (Azure/AWS Support).</p>
</div></blockquote>
<p>skipNodesWithLocalStorage -&gt; (boolean)</p>
<blockquote>
<div><p>Skip nodes with local storage flag. (AWS Support).</p>
</div></blockquote>
<p>skipNodesWithSystemPods -&gt; (boolean)</p>
<blockquote>
<div><p>Skip nodes with system pods. (AWS Support).</p>
</div></blockquote>
<p>maxGracefulTerminationSec -&gt; (integer)</p>
<blockquote>
<div><p>Maximum number of seconds CA waits for pod termination when trying to scale down a node. (Azure Support).</p>
</div></blockquote>
<p>scaleDownUnreadyTime -&gt; (string)</p>
<blockquote>
<div><p>How long an unready node should be unneeded before it is eligible for scale down. (Azure Support).</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<p>helm -&gt; (object)</p>
<blockquote>
<div><p>Helm structure.</p>
<p>version -&gt; (string)</p>
<blockquote>
<div><p>Helm version to be upgraded to.</p>
</div></blockquote>
</div></blockquote>
<p>security -&gt; (object)</p>
<blockquote>
<div><p>Security request structure.</p>
<p>apiServer -&gt; (object)</p>
<blockquote>
<div><p>API server request structure.</p>
<p>authorizedIpRanges -&gt; (array)</p>
<blockquote>
<div><p>An array of IPv4 CIDR blocks.</p>
<p>item -&gt; (string)</p>
</div></blockquote>
<p>enabled -&gt; (boolean)</p>
<blockquote>
<div><p>Flag to enable whitelist of IP Ranges (CIDR block) for public access to the kubernetes API server.</p>
</div></blockquote>
</div></blockquote>
<p>secretEncryption -&gt; (object)</p>
<blockquote>
<div><p>Secret encryption request structure.</p>
<p>customerKmsKeyArn -&gt; (string)</p>
<blockquote>
<div><p>The KMS key ARN used.</p>
</div></blockquote>
<p>enabled -&gt; (boolean)</p>
<blockquote>
<div><p>Flag to enable secret encryption.</p>
</div></blockquote>
</div></blockquote>
<p>volumeEncryption -&gt; (object)</p>
<blockquote>
<div><p>Volume encryption request structure.</p>
<p>customerKmsKeyArn -&gt; (string)</p>
<blockquote>
<div><p>The KMS key ARN used.</p>
</div></blockquote>
</div></blockquote>
<p>private -&gt; (boolean)</p>
<blockquote>
<div><p>Flag set to true for a private cluster with API Server having internal IP addressees.</p>
</div></blockquote>
</div></blockquote>
<p>storage -&gt; (object)</p>
<blockquote>
<div><p>Storage spec request structure.</p>
<p>csiEnabled -&gt; (boolean)</p>
<blockquote>
<div><p>Flag to enable Container Storage Interface (CSI). It further sets specific inline cloud formation policies required for CSI.</p>
</div></blockquote>
</div></blockquote>
<p>imageCatalog -&gt; (object)</p>
<blockquote>
<div><p>Image catalog request structure.</p>
<p>crn -&gt; (string)</p>
<blockquote>
<div><p>The catalog CRN (either CRN or name is required).</p>
</div></blockquote>
<p>name -&gt; (string)</p>
<blockquote>
<div><p>The catalog name (either CRN or name is required).</p>
</div></blockquote>
</div></blockquote>
<p>refreshInstanceGroups -&gt; (boolean)</p>
<blockquote>
<div><p>Whether to refresh nodes of instance groups belonging to the compute cluster.</p>
</div></blockquote>
</div></blockquote>
<p>JSON Syntax:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;deployments&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;autoscaler&quot;</span>: <span class="o">{</span>
      <span class="s2">&quot;scaleDownDelayAfterAdd&quot;</span>: <span class="s2">&quot;string&quot;</span>,
      <span class="s2">&quot;scaleDownDelayAfterDelete&quot;</span>: <span class="s2">&quot;string&quot;</span>,
      <span class="s2">&quot;scaleDownDelayAfterFailure&quot;</span>: <span class="s2">&quot;string&quot;</span>,
      <span class="s2">&quot;scaleDownEnabled&quot;</span>: true<span class="p">|</span>false,
      <span class="s2">&quot;scaleDownNonEmptyCandidatesCount&quot;</span>: integer,
      <span class="s2">&quot;scaleDownUnneededTime&quot;</span>: <span class="s2">&quot;string&quot;</span>,
      <span class="s2">&quot;scaleDownUtilizationThreshold&quot;</span>: double,
      <span class="s2">&quot;scanInterval&quot;</span>: <span class="s2">&quot;string&quot;</span>,
      <span class="s2">&quot;skipNodesWithLocalStorage&quot;</span>: true<span class="p">|</span>false,
      <span class="s2">&quot;skipNodesWithSystemPods&quot;</span>: true<span class="p">|</span>false,
      <span class="s2">&quot;maxGracefulTerminationSec&quot;</span>: integer,
      <span class="s2">&quot;scaleDownUnreadyTime&quot;</span>: <span class="s2">&quot;string&quot;</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">&quot;helm&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;version&quot;</span>: <span class="s2">&quot;string&quot;</span>
  <span class="o">}</span>,
  <span class="s2">&quot;security&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;apiServer&quot;</span>: <span class="o">{</span>
      <span class="s2">&quot;authorizedIpRanges&quot;</span>: <span class="o">[</span><span class="s2">&quot;string&quot;</span>, ...<span class="o">]</span>,
      <span class="s2">&quot;enabled&quot;</span>: true<span class="p">|</span><span class="nb">false</span>
    <span class="o">}</span>,
    <span class="s2">&quot;secretEncryption&quot;</span>: <span class="o">{</span>
      <span class="s2">&quot;customerKmsKeyArn&quot;</span>: <span class="s2">&quot;string&quot;</span>,
      <span class="s2">&quot;enabled&quot;</span>: true<span class="p">|</span><span class="nb">false</span>
    <span class="o">}</span>,
    <span class="s2">&quot;volumeEncryption&quot;</span>: <span class="o">{</span>
      <span class="s2">&quot;customerKmsKeyArn&quot;</span>: <span class="s2">&quot;string&quot;</span>
    <span class="o">}</span>,
    <span class="s2">&quot;private&quot;</span>: true<span class="p">|</span><span class="nb">false</span>
  <span class="o">}</span>,
  <span class="s2">&quot;storage&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;csiEnabled&quot;</span>: true<span class="p">|</span><span class="nb">false</span>
  <span class="o">}</span>,
  <span class="s2">&quot;imageCatalog&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;crn&quot;</span>: <span class="s2">&quot;string&quot;</span>,
    <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;string&quot;</span>
  <span class="o">}</span>,
  <span class="s2">&quot;refreshInstanceGroups&quot;</span>: true<span class="p">|</span><span class="nb">false</span>
<span class="o">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--cluster-state-version</span></code> (integer)</p>
<blockquote>
<div><p>Current cluster state version of the compute cluster being updated.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">--metadata</span></code> (object)</p>
<blockquote>
<div><p>Update cluster metadata structure.</p>
<p>description -&gt; (string)</p>
<blockquote>
<div><p>Description of compute cluster update.</p>
</div></blockquote>
</div></blockquote>
<p>Shorthand Syntax:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">description</span><span class="o">=</span>string
</pre></div>
</div>
<p>JSON Syntax:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;description&quot;</span>: <span class="s2">&quot;string&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--skip-validation</span></code> | <code class="docutils literal notranslate"><span class="pre">--no-skip-validation</span></code> (boolean)</p>
<blockquote>
<div><p>Whether to skip validation.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">--cli-input-json</span></code> (string)</p>
<blockquote>
<div><p>Performs service operation based on the JSON string provided. The JSON string follows the format provided by <code class="docutils literal notranslate"><span class="pre">--generate-cli-skeleton</span></code>. If other arguments are provided on the command line, the CLI values will override the JSON-provided values.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">--generate-cli-skeleton</span></code> (boolean)</p>
<blockquote>
<div><p>Prints a sample input JSON to standard output. Note the specified operation is not run if this argument is specified. The sample input can be used as an argument for <code class="docutils literal notranslate"><span class="pre">--cli-input-json</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>clusterCrn -&gt; (string)</p>
<blockquote>
<div><p>Compute cluster CRN.</p>
</div></blockquote>
<p>clusterStatus -&gt; (object)</p>
<blockquote>
<div><p>Cluster status structure.</p>
<p>message -&gt; (string)</p>
<blockquote>
<div><p>Message.</p>
</div></blockquote>
<p>status -&gt; (string)</p>
<blockquote>
<div><p>Status.</p>
</div></blockquote>
</div></blockquote>
<p>uri -&gt; (string)</p>
<blockquote>
<div><p>Uniform resource identifier of the compute cluster.</p>
</div></blockquote>
<p>validationResponse -&gt; (object)</p>
<blockquote>
<div><p>Pre-flight validation check response structure.</p>
<p>result -&gt; (string)</p>
<blockquote>
<div><p>Validation result.</p>
</div></blockquote>
<p>summary -&gt; (object)</p>
<blockquote>
<div><p>Validation summary structure.</p>
<p>passed -&gt; (integer)</p>
<blockquote>
<div><p>Total number of passed validations.</p>
</div></blockquote>
<p>warning -&gt; (integer)</p>
<blockquote>
<div><p>Total number of validations that passed but have warnings associated with them.</p>
</div></blockquote>
<p>failed -&gt; (integer)</p>
<blockquote>
<div><p>Total number of failed validations.</p>
</div></blockquote>
<p>skipped -&gt; (integer)</p>
<blockquote>
<div><p>Total number of skipped validations.</p>
</div></blockquote>
<p>total -&gt; (integer)</p>
<blockquote>
<div><p>Total number of validations.</p>
</div></blockquote>
</div></blockquote>
<p>message -&gt; (string)</p>
<blockquote>
<div><p>A message describing end result of the validations.</p>
</div></blockquote>
<p>validations -&gt; (array)</p>
<blockquote>
<div><p>The list of detailed validation result.</p>
<p>item -&gt; (object)</p>
<blockquote>
<div><p>Validation result structure.</p>
<p>name -&gt; (string)</p>
<blockquote>
<div><p>Name.</p>
</div></blockquote>
<p>description -&gt; (string)</p>
<blockquote>
<div><p>Description.</p>
</div></blockquote>
<p>category -&gt; (string)</p>
<blockquote>
<div><p>Validation check categories such as COMMON, ENTITLEMENTS, CONTROL_PLANE, NETWORK, or DEPLOYMENT. New values may be added in the future.</p>
</div></blockquote>
<p>status -&gt; (string)</p>
<blockquote>
<div><p>Validation check status such as PASSED, FAILED, or SKIPPED. New values may be added in the future.</p>
</div></blockquote>
<p>message -&gt; (string)</p>
<blockquote>
<div><p>A short, human-readable message that describes the end result of the validation.</p>
</div></blockquote>
<p>detailedMessage -&gt; (string)</p>
<blockquote>
<div><p>A supporting message which contains additional details, such as subnet names, instance types, etc.</p>
</div></blockquote>
<p>duration -&gt; (string)</p>
<blockquote>
<div><p>Time taken to get the end result of the validation in a human-readable time format.</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="form-factors">
<h2>Form Factors<a class="headerlink" href="#form-factors" title="Permalink to this headline">¶</a></h2>
<p>public</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">update-cluster</a><ul>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#output">Output</a></li>
<li><a class="reference internal" href="#form-factors">Form Factors</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="rollback-deployment.html"
                        title="previous chapter">rollback-deployment</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="update-instance-group.html"
                        title="next chapter">update-instance-group</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="update-instance-group.html" title="update-instance-group"
             >next</a></li>
        <li class="right" >
          <a href="rollback-deployment.html" title="rollback-deployment"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CDP CLI 0.9.89 (BETA) documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >compute</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">update-cluster</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Cloudera, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.2.
    </div>
  </body>
</html>
